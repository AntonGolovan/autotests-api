# Autotests API

ะัะพะตะบั ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั API ะดะปั ัะธััะตะผั ัะฟัะฐะฒะปะตะฝะธั ะบะฐะผะฟะฐะฝะธัะผะธ ะธ ะบัะตะฐัะธะฒะฐะผะธ. ะัะพะตะบั ะฟะพัััะพะตะฝ ะฝะฐ ะพัะฝะพะฒะต ัะพะฒัะตะผะตะฝะฝะพะณะพ ััะตะบะฐ ัะตัะฝะพะปะพะณะธะน Python ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ pytest, httpx, Pydantic ะธ ะดััะณะธั ะธะฝััััะผะตะฝัะพะฒ.

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ](#ะพะฟะธัะฐะฝะธะต-ะฟัะพะตะบัะฐ)
- [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
- [ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ](#ัะตัะฝะพะปะพะณะธัะตัะบะธะน-ััะตะบ)
- [ะฃััะฐะฝะพะฒะบะฐ ะธ ะฝะฐัััะพะนะบะฐ](#ัััะฐะฝะพะฒะบะฐ-ะธ-ะฝะฐัััะพะนะบะฐ)
- [ะะฐะฟััะบ ัะตััะพะฒ](#ะทะฐะฟััะบ-ัะตััะพะฒ)
- [ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั](#ะบะพะผะฟะพะฝะตะฝัั-ัะธััะตะผั)
- [ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั](#ะฟัะธะผะตัั-ะธัะฟะพะปัะทะพะฒะฐะฝะธั)

## ๐ฏ ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

ะะฐะฝะฝัะน ะฟัะพะตะบั ะฟัะตะดััะฐะฒะปัะตั ัะพะฑะพะน ะบะพะผะฟะปะตะบัะฝัั ัะธััะตะผั ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั API ะดะปั CRM-ัะธััะตะผั ัะฟัะฐะฒะปะตะฝะธั ะผะฐัะบะตัะธะฝะณะพะฒัะผะธ ะบะฐะผะฟะฐะฝะธัะผะธ. ะกะธััะตะผะฐ ะฟะพะทะฒะพะปัะตั:

- **ะกะพะทะดะฐะฒะฐัั ะธ ัะฟัะฐะฒะปััั ะบะฐะผะฟะฐะฝะธัะผะธ** - ัะตััะธัะพะฒะฐะฝะธะต ะฟะพะปะฝะพะณะพ ะถะธะทะฝะตะฝะฝะพะณะพ ัะธะบะปะฐ ะบะฐะผะฟะฐะฝะธะน ะพั ัะพะทะดะฐะฝะธั ะดะพ ะทะฐะฒะตััะตะฝะธั
- **ะะฐะฑะพัะฐัั ั ะบัะตะฐัะธะฒะฐะผะธ** - ัะพะทะดะฐะฝะธะต ะธ ัะฟัะฐะฒะปะตะฝะธะต ะบัะตะฐัะธะฒะฝัะผะธ ะผะฐัะตัะธะฐะปะฐะผะธ ะดะปั ะบะฐะผะฟะฐะฝะธะน
- **ะะฐะปะธะดะธัะพะฒะฐัั API** - ะฟัะพะฒะตัะบะฐ ะบะพััะตะบัะฝะพััะธ ะพัะฒะตัะพะฒ ัะตัะฒะตัะฐ ะธ ัะพะพัะฒะตัััะฒะธั ััะตะผะต ะดะฐะฝะฝัั
- **ะะตะฝะตัะธัะพะฒะฐัั ัะตััะพะฒัะต ะดะฐะฝะฝัะต** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ัะตะฐะปะธััะธัะฝัั ัะตััะพะฒัั ะดะฐะฝะฝัั

## ๐๏ธ ะััะธัะตะบัััะฐ

ะัะพะตะบั ะฟะพัััะพะตะฝ ะฟะพ ะฟัะธะฝัะธะฟั **Page Object Model** (POM), ะฐะดะฐะฟัะธัะพะฒะฐะฝะฝะพะผั ะดะปั API-ัะตััะธัะพะฒะฐะฝะธั:

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Test Layer    โ    โ  Client Layer   โ    โ  Schema Layer   โ
โ                 โ    โ                 โ    โ                 โ
โ โข test_*.py     โโโโโถโ โข *_client.py   โโโโโถโ โข *_schema.py   โ
โ โข Fixtures      โ    โ โข API calls     โ    โ โข Data models   โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ Assertion Layer โ    โ   HTTP Layer    โ    โ  Utility Layer  โ
โ                 โ    โ                 โ    โ                 โ
โ โข assertions/   โ    โ โข httpx         โ    โ โข fakers.py     โ
โ โข validations   โ    โ โข APIClient     โ    โ โข helpers       โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
autotests-api/
โโโ clients/                    # API ะบะปะธะตะฝัั
โ   โโโ api_client.py          # ะะฐะทะพะฒัะน HTTP ะบะปะธะตะฝั
โ   โโโ client_builder.py      # ะคะฐะฑัะธะบะฐ ะบะปะธะตะฝัะพะฒ
โ   โโโ campaign/              # ะะปะธะตะฝั ะดะปั ัะฐะฑะพัั ั ะบะฐะผะฟะฐะฝะธัะผะธ
โ   โ   โโโ campaign_client.py
โ   โ   โโโ models/
โ   โ       โโโ campaign_schema.py
โ   โโโ creative/              # ะะปะธะตะฝั ะดะปั ัะฐะฑะพัั ั ะบัะตะฐัะธะฒะฐะผะธ
โ       โโโ creative_client.py
โ       โโโ models/
โ           โโโ creative_schema.py
โโโ fixtures/                  # Pytest ัะธะบััััั
โ   โโโ campaign_fixture.py
โ   โโโ creative_fixture.py
โโโ tests/                     # ะขะตััะพะฒัะต ััะตะฝะฐัะธะธ
โ   โโโ campaign/
โ   โ   โโโ test_campaign.py
โ   โโโ creative/
โ       โโโ test_creative.py
โโโ tools/                     # ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ะธะฝััััะผะตะฝัั
โ   โโโ assertions/           # ะะฐััะพะผะฝัะต ะฟัะพะฒะตัะบะธ
โ   โ   โโโ base.py
โ   โ   โโโ campaign.py
โ   โ   โโโ creative.py
โ   โ   โโโ schema.py
โ   โโโ fakers.py            # ะะตะฝะตัะฐัะพั ัะตััะพะฒัั ะดะฐะฝะฝัั
โโโ testdata/                 # ะขะตััะพะฒัะต ะดะฐะฝะฝัะต
โ   โโโ files/
โ       โโโ image.png
โโโ conftest.py              # ะะพะฝัะธะณััะฐัะธั pytest
โโโ pytest.ini              # ะะฐัััะพะนะบะธ pytest
โโโ requirements.txt         # ะะฐะฒะธัะธะผะพััะธ ะฟัะพะตะบัะฐ
โโโ README.md               # ะะพะบัะผะตะฝัะฐัะธั
```

## ๐๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

### ะัะฝะพะฒะฝัะต ะฑะธะฑะปะธะพัะตะบะธ

- **pytest** (7.4.0) - ััะตะนะผะฒะพัะบ ะดะปั ัะตััะธัะพะฒะฐะฝะธั
- **httpx** (0.28.1) - ัะพะฒัะตะผะตะฝะฝัะน HTTP ะบะปะธะตะฝั ะดะปั ะฐัะธะฝััะพะฝะฝัั ะธ ัะธะฝััะพะฝะฝัั ะทะฐะฟัะพัะพะฒ
- **Pydantic** (2.11.7) - ะฒะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั ะธ ัะตัะธะฐะปะธะทะฐัะธั/ะดะตัะตัะธะฐะปะธะทะฐัะธั
- **Faker** (37.6.0) - ะณะตะฝะตัะฐัะธั ัะตะฐะปะธััะธัะฝัั ัะตััะพะฒัั ะดะฐะฝะฝัั
- **jsonschema** (4.25.1) - ะฒะฐะปะธะดะฐัะธั JSON ััะตะผ

### ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะธะฝััััะผะตะฝัั

- **python-dateutil** - ัะฐะฑะพัะฐ ั ะดะฐัะฐะผะธ ะธ ะฒัะตะผะตะฝะตะผ
- **typing-extensions** - ัะฐััะธัะตะฝะฝัะต ัะธะฟั ะดะปั Python
- **certifi** - SSL ัะตััะธัะธะบะฐัั ะดะปั HTTPS ะทะฐะฟัะพัะพะฒ

## โ๏ธ ะฃััะฐะฝะพะฒะบะฐ ะธ ะฝะฐัััะพะนะบะฐ

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Python 3.8+
- pip (ะผะตะฝะตะดะถะตั ะฟะฐะบะตัะพะฒ Python)

### ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
git clone <repository-url>
cd autotests-api

# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python -m venv venv

# ะะบัะธะฒะฐัะธั ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt
```

### ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

ะัะพะตะบั ะฝะฐัััะพะตะฝ ะดะปั ัะฐะฑะพัั ั ัะตััะพะฒัะผ ะพะบััะถะตะฝะธะตะผ:
- **Base URL**: `https://qq.taxi.tst.yandex-team.ru/api-t/admin/crm_admin`
- **Timeout**: 5 ัะตะบัะฝะด

## ๐ ะะฐะฟััะบ ัะตััะพะฒ

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตััะพะฒ
pytest

# ะะฐะฟััะบ ั ะฟะพะดัะพะฑะฝัะผ ะฒัะฒะพะดะพะผ
pytest -v -s

# ะะฐะฟััะบ ัะตััะพะฒ ะบะฐะผะฟะฐะฝะธะน
pytest tests/campaign/

# ะะฐะฟััะบ ัะตััะพะฒ ะบัะตะฐัะธะฒะพะฒ
pytest tests/creative/

# ะะฐะฟััะบ ัะตััะพะฒ ะฟะพ ะผะฐัะบะตัะฐะผ
pytest -m smoke          # ะัะผะพะฒัะต ัะตััั
pytest -m regression     # ะะตะณัะตััะธะพะฝะฝัะต ัะตััั
pytest -m test_creative  # ะขะตััั ะบัะตะฐัะธะฒะพะฒ
```

### ะะฐัะฐะผะตััั pytest

ะะฐัััะพะนะบะธ ะฒ `pytest.ini`:
- `-s` - ะพัะบะปััะตะฝะธะต ะทะฐัะฒะฐัะฐ ะฒัะฒะพะดะฐ
- `-v` - ะฟะพะดัะพะฑะฝัะน ัะตะถะธะผ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะฐััะถะตะฝะธะต ัะตััะพะฒ ะฟะพ ะฟะฐััะตัะฝะฐะผ `test_*.py` ะธ `*_tests.py`

## ๐ง ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั

### 1. API ะะปะธะตะฝัั

#### APIClient (ะะฐะทะพะฒัะน ะบะปะธะตะฝั)
```python
class APIClient:
    """ะะฐะทะพะฒัะน HTTP ะบะปะธะตะฝั ั ะผะตัะพะดะฐะผะธ ะดะปั ะฒัะตั ัะธะฟะพะฒ ะทะฐะฟัะพัะพะฒ"""
    
    def get(url, params=None)     # GET ะทะฐะฟัะพัั
    def post(url, json=None)      # POST ะทะฐะฟัะพัั  
    def patch(url, json=None)     # PATCH ะทะฐะฟัะพัั
    def delete(url)               # DELETE ะทะฐะฟัะพัั
```

**ะะฐัะตะผ ะฝัะถะตะฝ**: ะัะตะดะพััะฐะฒะปัะตั ะตะดะธะฝะพะพะฑัะฐะทะฝัะน ะธะฝัะตััะตะนั ะดะปั ะฒัะตั HTTP ะพะฟะตัะฐัะธะน, ะธะฝะบะฐะฟััะปะธััะตั ัะฐะฑะพัั ั httpx, ะดะพะฑะฐะฒะปัะตั ะพะฑััั ััะฝะบัะธะพะฝะฐะปัะฝะพััั (ะปะพะณะธัะพะฒะฐะฝะธะต, ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ).

#### CampaignClient
```python
class CampaignClient(APIClient):
    """ะกะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะบะปะธะตะฝั ะดะปั ัะฐะฑะพัั ั ะบะฐะผะฟะฐะฝะธัะผะธ"""
    
    def get_campaign_api(campaign_id)           # ะะพะปััะตะฝะธะต ะบะฐะผะฟะฐะฝะธะธ
    def create_campaign_api(request)            # ะกะพะทะดะฐะฝะธะต ะบะฐะผะฟะฐะฝะธะธ
    def update_campaign_api(campaign_id, request) # ะะฑะฝะพะฒะปะตะฝะธะต ะบะฐะผะฟะฐะฝะธะธ
    def create_campaign(request)                # ะกะพะทะดะฐะฝะธะต ั ะฒะฐะปะธะดะฐัะธะตะน
```

**ะะฐัะตะผ ะฝัะถะตะฝ**: ะะฝะบะฐะฟััะปะธััะตั ะฒัั ะปะพะณะธะบั ัะฐะฑะพัั ั API ะบะฐะผะฟะฐะฝะธะน, ะฟัะตะดะพััะฐะฒะปัะตั ัะธะฟะธะทะธัะพะฒะฐะฝะฝัะต ะผะตัะพะดั, ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑัะฐะฑะฐััะฒะฐะตั ัะตัะธะฐะปะธะทะฐัะธั/ะดะตัะตัะธะฐะปะธะทะฐัะธั ะดะฐะฝะฝัั.

#### CreativeClient
```python
class CreativeClient(APIClient):
    """ะกะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะบะปะธะตะฝั ะดะปั ัะฐะฑะพัั ั ะบัะตะฐัะธะฒะฐะผะธ"""
    
    def create_creative_map_api(campaign_id, request)  # ะกะพะทะดะฐะฝะธะต ะบะฐััั ะบัะตะฐัะธะฒะพะฒ
    def get_creative_maps_api(campaign_id)             # ะะพะปััะตะฝะธะต ะบะฐัั ะบัะตะฐัะธะฒะพะฒ
    def create_creative_cms_api(request)               # ะกะพะทะดะฐะฝะธะต ะบัะตะฐัะธะฒะฐ ะฒ CMS
```

**ะะฐัะตะผ ะฝัะถะตะฝ**: ะฃะฟัะฐะฒะปัะตั ัะปะพะถะฝะพะน ะปะพะณะธะบะพะน ัะฐะฑะพัั ั ะบัะตะฐัะธะฒะฐะผะธ, ะฒะบะปััะฐั ัะพะทะดะฐะฝะธะต ะบะฐัั ะบัะตะฐัะธะฒะพะฒ ะธ ัะฒัะทัะฒะฐะฝะธะต ะธั ั ะบะฐะผะฟะฐะฝะธัะผะธ.

### 2. ะะพะดะตะปะธ ะดะฐะฝะฝัั (Pydantic ััะตะผั)

#### Campaign Schema
- **CreateCampaignRequestSchema** - ะดะฐะฝะฝัะต ะดะปั ัะพะทะดะฐะฝะธั ะบะฐะผะฟะฐะฝะธะธ
- **CreateCampaignResponseSchema** - ะพัะฒะตั ัะตัะฒะตัะฐ ะฟัะธ ัะพะทะดะฐะฝะธะธ
- **UpdateCampaignRequestSchema** - ะดะฐะฝะฝัะต ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั
- **CampaignStateSchema** - ัะพััะพัะฝะธั ะบะฐะผะฟะฐะฝะธะธ (NEW, READY, COMPLETED, etc.)

#### Creative Schema  
- **CreateCreativeMapRequestSchema** - ัะพะทะดะฐะฝะธะต ะบะฐััั ะบัะตะฐัะธะฒะพะฒ
- **CreateCreativeCmsRequestSchema** - ัะพะทะดะฐะฝะธะต ะบัะตะฐัะธะฒะฐ ะฒ CMS
- **LocaleWithContentSchema** - ะปะพะบะฐะปะธะทะพะฒะฐะฝะฝัะน ะบะพะฝัะตะฝั
- **MediaSchema** - ะผะตะดะธะฐ ะผะฐัะตัะธะฐะปั

**ะะฐัะตะผ ะฝัะถะฝั**: ะะฑะตัะฟะตัะธะฒะฐัั ัะธะฟะธะทะฐัะธั ะดะฐะฝะฝัั, ะฐะฒัะพะผะฐัะธัะตัะบัั ะฒะฐะปะธะดะฐัะธั, ัะตัะธะฐะปะธะทะฐัะธั/ะดะตัะตัะธะฐะปะธะทะฐัะธั JSON, ะฐะฒัะพะดะพะฟะพะปะฝะตะฝะธะต ะฒ IDE.

### 3. ะคะธะบััััั (Fixtures)

#### CampaignFixture
```python
class CampaignFixture(BaseModel):
    request: CreateCampaignRequestSchema
    response: CreateCampaignResponseSchema
    
    @property
    def campaign_id(self) -> int
    @property  
    def planned_channel(self) -> list[str]
```

#### CreativeMapFixture
```python
class CreativeMapFixture(BaseModel):
    request: CreateCreativeMapRequestSchema
    response: CreateCreativeMapResponseSchema
```

**ะะฐัะตะผ ะฝัะถะฝั**: ะฃะฟัะพัะฐัั ัะพะทะดะฐะฝะธะต ัะตััะพะฒัั ะดะฐะฝะฝัั, ะพะฑะตัะฟะตัะธะฒะฐัั ะฟะตัะตะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะพะฑัะตะบัะพะฒ ะผะตะถะดั ัะตััะฐะผะธ, ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฟัะฐะฒะปััั ะถะธะทะฝะตะฝะฝัะผ ัะธะบะปะพะผ ัะตััะพะฒัั ัััะฝะพััะตะน.

### 4. ะกะธััะตะผะฐ ะฟัะพะฒะตัะพะบ (Assertions)

#### ะะฐะทะพะฒัะต ะฟัะพะฒะตัะบะธ
```python
def assert_status_code(actual, expected)    # ะัะพะฒะตัะบะฐ HTTP ััะฐัััะฐ
def assert_equal(actual, expected, name)    # ะัะพะฒะตัะบะฐ ัะฐะฒะตะฝััะฒะฐ ะทะฝะฐัะตะฝะธะน
def assert_is_true(actual, name)            # ะัะพะฒะตัะบะฐ ะธััะธะฝะฝะพััะธ
```

#### ะกะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ะฟัะพะฒะตัะบะธ
```python
def assert_create_campaign(request, response)           # ะัะพะฒะตัะบะฐ ัะพะทะดะฐะฝะธั ะบะฐะผะฟะฐะฝะธะธ
def assert_creative_map(request, response)              # ะัะพะฒะตัะบะฐ ะบะฐััั ะบัะตะฐัะธะฒะพะฒ
def validate_json_schema(instance, schema)              # ะะฐะปะธะดะฐัะธั JSON ััะตะผั
```

**ะะฐัะตะผ ะฝัะถะฝั**: ะะฑะตัะฟะตัะธะฒะฐัั ะตะดะธะฝะพะพะฑัะฐะทะฝัะต ะธ ะธะฝัะพัะผะฐัะธะฒะฝัะต ัะพะพะฑัะตะฝะธั ะพะฑ ะพัะธะฑะบะฐั, ะธะฝะบะฐะฟััะปะธัััั ัะปะพะถะฝัั ะปะพะณะธะบั ะฟัะพะฒะตัะพะบ, ัะฟัะพัะฐัั ะฝะฐะฟะธัะฐะฝะธะต ัะตััะพะฒ.

### 5. ะะตะฝะตัะฐัะพั ัะตััะพะฒัั ะดะฐะฝะฝัั (Fakers)

```python
class Fake:
    def text() -> str                    # ะกะปััะฐะนะฝัะน ัะตะบัั
    def email(domain=None) -> str        # Email ะฐะดัะตั
    def uuid4() -> str                   # UUID
    def integer(start=1, end=100) -> int # ะกะปััะฐะนะฝะพะต ัะธัะปะพ
    def sentence() -> str                # ะัะตะดะปะพะถะตะฝะธะต
```

**ะะฐัะตะผ ะฝัะถะตะฝ**: ะะตะฝะตัะธััะตั ัะตะฐะปะธััะธัะฝัะต ัะตััะพะฒัะต ะดะฐะฝะฝัะต, ะพะฑะตัะฟะตัะธะฒะฐะตั ัะฝะธะบะฐะปัะฝะพััั ะดะฐะฝะฝัั ะฒ ัะตััะฐั, ัะฟัะพัะฐะตั ัะพะทะดะฐะฝะธะต ัะตััะพะฒัั ััะตะฝะฐัะธะตะฒ.

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะกะพะทะดะฐะฝะธะต ะบะฐะผะฟะฐะฝะธะธ

```python
def test_create_campaign(campaign_client: CampaignClient):
    # ะกะพะทะดะฐะฝะธะต ะทะฐะฟัะพัะฐ ั ัะตััะพะฒัะผะธ ะดะฐะฝะฝัะผะธ
    request = CreateCampaignRequestSchema(
        name="ะขะตััะพะฒะฐั ะบะฐะผะฟะฐะฝะธั",
        specification="ะะฟะธัะฐะฝะธะต ะบะฐะผะฟะฐะฝะธะธ",
        planned_channels=["user_push"]
    )
    
    # ะัะฟัะฐะฒะบะฐ ะทะฐะฟัะพัะฐ
    response = campaign_client.create_campaign_api(request)
    
    # ะัะพะฒะตัะบะธ
    assert_status_code(response.status_code, HTTPStatus.OK)
    response_data = CreateCampaignResponseSchema.model_validate_json(response.text)
    assert_create_campaign(request, response_data)
```

### ะะฐะฑะพัะฐ ั ะบัะตะฐัะธะฒะฐะผะธ

```python
def test_creative_workflow(campaign: CampaignFixture, creative_client: CreativeClient):
    # ะกะพะทะดะฐะฝะธะต ะบะฐััั ะบัะตะฐัะธะฒะพะฒ
    map_request = CreateCreativeMapRequestSchema(
        creative_map_name="ะขะตััะพะฒะฐั ะบะฐััะฐ",
        communication_channel=campaign.planned_channel
    )
    
    map_response = creative_client.create_creative_map(
        campaign_id=campaign.campaign_id, 
        request=map_request
    )
    
    # ะกะพะทะดะฐะฝะธะต ะบัะตะฐัะธะฒะฐ ะฒ CMS
    cms_request = CreateCreativeCmsRequestSchema(
        communication_channel="object_over_map",
        creative_map_id_with_version=CreativeMapIdWithVersionSchema(
            id=map_response.creative_map_id,
            version=1
        )
    )
    
    cms_response = creative_client.create_creative_cms(cms_request)
    
    # ะัะพะฒะตัะบะฐ ัะฒัะทะธ ะผะตะถะดั ะบะฐััะพะน ะธ ะบัะตะฐัะธะฒะพะผ
    assert_relation_creative_map_with_creative_cms(cms_response, map_response)
```

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะธะบัััั

```python
def test_campaign_lifecycle(campaign: CampaignFixture, campaign_client: CampaignClient):
    # ะคะธะบััััะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตั ะบะฐะผะฟะฐะฝะธั
    assert campaign.campaign_id > 0
    assert len(campaign.planned_channel) > 0
    
    # ะะพะปััะตะฝะธะต ัะพะทะดะฐะฝะฝะพะน ะบะฐะผะฟะฐะฝะธะธ
    response = campaign_client.get_campaign_api(str(campaign.campaign_id))
    assert_status_code(response.status_code, HTTPStatus.OK)
```

## ๐ท๏ธ ะะฐัะบะตัั ัะตััะพะฒ

ะัะพะตะบั ะธัะฟะพะปัะทัะตั pytest ะผะฐัะบะตัั ะดะปั ะบะฐัะตะณะพัะธะทะฐัะธะธ ัะตััะพะฒ:

- `@pytest.mark.smoke` - ะดัะผะพะฒัะต ัะตััั (ะฑัััััะต, ะบัะธัะธัะฝัะต)
- `@pytest.mark.regression` - ัะตะณัะตััะธะพะฝะฝัะต ัะตััั (ะฟะพะปะฝะพะต ะฟะพะบัััะธะต)
- `@pytest.mark.test_creative` - ัะตััั ะบัะตะฐัะธะฒะพะฒ
- `@pytest.mark.users` - ัะตััั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- `@pytest.mark.authentication` - ัะตััั ะฐััะตะฝัะธัะธะบะฐัะธะธ

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะพัะปะฐะดะบะฐ

### ะะพะณะธัะพะฒะฐะฝะธะต
ะัะต HTTP ะทะฐะฟัะพัั ะปะพะณะธัััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะตัะตะท httpx. ะะปั ะฒะบะปััะตะฝะธั ะฟะพะดัะพะฑะฝะพะณะพ ะปะพะณะธัะพะฒะฐะฝะธั:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

### ะัะปะฐะดะบะฐ ัะตััะพะฒ
```bash
# ะะฐะฟััะบ ั ะพัะปะฐะดะพัะฝะพะน ะธะฝัะพัะผะฐัะธะตะน
pytest -v -s --tb=long

# ะะฐะฟััะบ ะบะพะฝะบัะตัะฝะพะณะพ ัะตััะฐ
pytest tests/campaign/test_campaign.py::TestCampaign::test_create_campaign -v -s
```

## ๐ ะะพะบัััะธะต ัะตััะฐะผะธ

ะัะพะตะบั ะพะฑะตัะฟะตัะธะฒะฐะตั ะบะพะผะฟะปะตะบัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต:

- โ **ะคัะฝะบัะธะพะฝะฐะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต** - ะฟัะพะฒะตัะบะฐ ะบะพััะตะบัะฝะพััะธ API
- โ **ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั** - ะฟัะพะฒะตัะบะฐ ััะตะผ ะธ ัะธะฟะพะฒ ะดะฐะฝะฝัั  
- โ **ะะฝัะตะณัะฐัะธะพะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต** - ัะตััะธัะพะฒะฐะฝะธะต ะฒะทะฐะธะผะพะดะตะนััะฒะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ
- โ **ะะตะณัะตััะธะพะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต** - ะฟัะพะฒะตัะบะฐ ััะฐะฑะธะปัะฝะพััะธ ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธะน

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. ะกะพะทะดะฐะนัะต feature ะฒะตัะบั
2. ะะพะฑะฐะฒััะต ัะตััั ะดะปั ะฝะพะฒะพะน ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ
3. ะฃะฑะตะดะธัะตัั, ััะพ ะฒัะต ัะตััั ะฟัะพัะพะดัั
4. ะกะพะทะดะฐะนัะต Pull Request

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฒะพะฟัะพัะพะฒ ะธะปะธ ะฟัะพะฑะปะตะผ:
1. ะัะพะฒะตัััะต ะดะพะบัะผะตะฝัะฐัะธั
2. ะะทััะธัะต ะฟัะธะผะตัั ะฒ ะฟะฐะฟะบะต `tests/`
3. ะะฑัะฐัะธัะตัั ะบ ะบะพะผะฐะฝะดะต ัะฐะทัะฐะฑะพัะบะธ

---

**ะะตััะธั ะฟัะพะตะบัะฐ**: 1.0.0  
**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต**: 2025  
**ะะฒัะพั**: ะะพะผะฐะฝะดะฐ ัะฐะทัะฐะฑะพัะบะธ ะฐะฒัะพัะตััะพะฒ
